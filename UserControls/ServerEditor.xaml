<UserControl x:Class="Minecraft_Server_Manager.UserControls.ServerEditor" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" mc:Ignorable="d" d:DesignHeight="900" d:DesignWidth="800">
	<Grid Background="#2c3e50">
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
			<RowDefinition Height="Auto"/>
		</Grid.RowDefinitions>
        <Border Grid.Row="0" Padding="20" Background="#2c3e50">
			<StackPanel>
				<Grid Margin="0,0,0,15">
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="*"/>
						<ColumnDefinition Width="Auto"/>
					</Grid.ColumnDefinitions>
					<TextBlock Grid.Column="0" Text="CONFIGURATION DU SERVEUR" Foreground="#bdc3c7" FontSize="12" FontWeight="Bold" VerticalAlignment="Center"/>
					<Button Grid.Column="1" Content="SUPPRIMER" Command="{Binding DeleteCommand}" FontSize="10" FontWeight="Bold" Background="#e74c3c" Foreground="White" BorderThickness="0" Padding="10,5" Cursor="Hand" Width="70">
						<Button.Template>
							<ControlTemplate TargetType="Button">
								<Border Background="{TemplateBinding Background}">
									<ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
								</Border>
							</ControlTemplate>
						</Button.Template>
					</Button>
				</Grid>
				<TextBlock Text="Nom d'affichage" Foreground="White" Margin="0,0,0,5"/>
                <TextBox Name="ServerName" Text="{Binding DisplayName, UpdateSourceTrigger=PropertyChanged}" Padding="5" FontSize="16" Background="#34495e" Foreground="White" BorderThickness="0"/>
				<TextBlock Text="Chemin du dossier" Foreground="#95a5a6" Margin="0,10,0,5"/>
				<TextBox Name="ServerPath" Text="{Binding FolderPath, Mode=OneWay}" IsReadOnly="True" Padding="5" Background="Transparent" Foreground="#7f8c8d" BorderThickness="0"/>
			</StackPanel>
		</Border>
		<Grid Grid.Row="1">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="*"/>
				<ColumnDefinition Width="600"/>
			</Grid.ColumnDefinitions>
			<DataGrid Grid.Column="0" ItemsSource="{Binding ServerProperties}" AutoGenerateColumns="False" CanUserAddRows="True" CanUserSortColumns="False" CanUserReorderColumns="False" CanUserResizeColumns="False" Background="Transparent" RowBackground="#2c3e50" AlternatingRowBackground="#34495e" Foreground="White" BorderThickness="0" HeadersVisibility="Column" GridLinesVisibility="Horizontal" HorizontalGridLinesBrush="#7f8c8d">
				<DataGrid.ColumnHeaderStyle>
					<Style TargetType="DataGridColumnHeader">
						<Setter Property="Background" Value="#2c3e50"/>
						<Setter Property="Foreground" Value="#95a5a6"/>
						<Setter Property="FontSize" Value="14"/>
						<Setter Property="FontWeight" Value="Bold"/>
						<Setter Property="Padding" Value="10,10"/>
						<Setter Property="Height" Value="40"/>
						<Setter Property="Template">
							<Setter.Value>
								<ControlTemplate TargetType="DataGridColumnHeader">
									<Border Background="{TemplateBinding Background}" BorderBrush="#7f8c8d" BorderThickness="0,0,0,2">
										<ContentPresenter HorizontalAlignment="Left" VerticalAlignment="Center" Margin="{TemplateBinding Padding}"/>
									</Border>
								</ControlTemplate>
							</Setter.Value>
						</Setter>
					</Style>
				</DataGrid.ColumnHeaderStyle>
				<DataGrid.Columns>
					<DataGridTextColumn Header="Propriété" Binding="{Binding Key}" Width="200" IsReadOnly="True">
						<DataGridTextColumn.ElementStyle>
							<Style TargetType="TextBlock">
								<Setter Property="Foreground" Value="#3498db"/>
								<Setter Property="FontWeight" Value="SemiBold"/>
								<Setter Property="Padding" Value="10,5"/>
							</Style>
						</DataGridTextColumn.ElementStyle>
					</DataGridTextColumn>
					<DataGridTextColumn Header="Valeur" Binding="{Binding Value}" Width="*">
						<DataGridTextColumn.ElementStyle>
							<Style TargetType="TextBlock">
								<Setter Property="Padding" Value="10,5"/>
							</Style>
						</DataGridTextColumn.ElementStyle>
					</DataGridTextColumn>
				</DataGrid.Columns>
			</DataGrid>
			<Border Grid.Column="1" Background="#2c3e50" BorderBrush="#7f8c8d" BorderThickness="1,0,0,0" Padding="15">
				<ScrollViewer VerticalScrollBarVisibility="Auto">
					<StackPanel>
						<TextBlock Text="PARAMÈTRES AVANCÉS" Foreground="#bdc3c7" FontSize="12" FontWeight="Bold" Margin="0,0,0,15"/>
						<TextBlock Text="Miniature du serveur" Foreground="White" Margin="0,0,0,5"/>
						<Border BorderBrush="#7f8c8d" BorderThickness="1" CornerRadius="5" Background="#34495e" Height="120" Width="120" Margin="0,0,0,5">
							<Image Source="{Binding ServerIconSource}" Stretch="UniformToFill"/>
						</Border>
						<Button Content="Choisir une image..." Command="{Binding SelectImageCommand}" Background="#3498db" Foreground="White" BorderThickness="0" Padding="10,5" Cursor="Hand" Width="150" Margin="0,0,0,20">
							<Button.Template>
								<ControlTemplate TargetType="Button">
									<Border Background="{TemplateBinding Background}" CornerRadius="3">
										<ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
									</Border>
								</ControlTemplate>
							</Button.Template>
						</Button>
						<TextBlock Text="Version Java (JDK/JRE)" Foreground="White" Margin="0,0,0,5"/>
						<Grid Margin="0,0,0,20">
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="*"/>
								<ColumnDefinition Width="Auto"/>
							</Grid.ColumnDefinitions>
							<ComboBox ItemsSource="{Binding DetectedJavaPaths}" SelectedItem="{Binding JavaPath, UpdateSourceTrigger=PropertyChanged}" IsEditable="False" Padding="10,5" Background="#34495e" Foreground="Black" BorderThickness="0" VerticalContentAlignment="Center">
								<ComboBox.Resources>
									<Style TargetType="ComboBoxItem">
										<Setter Property="Background" Value="#34495e"/>
										<Setter Property="Foreground" Value="White"/>
										<Setter Property="BorderThickness" Value="0"/>
										<Setter Property="Padding" Value="5"/>
										<Setter Property="Template">
											<Setter.Value>
												<ControlTemplate TargetType="ComboBoxItem">
													<Border x:Name="Bd" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}">
														<ContentPresenter/>
													</Border>
													<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter TargetName="Bd" Property="Background" Value="#3498db"/>
														</Trigger>
														<Trigger Property="IsSelected" Value="True">
															<Setter TargetName="Bd" Property="Background" Value="#2980b9"/>
														</Trigger>
													</ControlTemplate.Triggers>
												</ControlTemplate>
											</Setter.Value>
										</Setter>
									</Style>
								</ComboBox.Resources>
							</ComboBox>
							<Button Grid.Column="1" Content="..." Command="{Binding SelectJdkCommand}" Width="35" Margin="5,0,0,0" Background="#3498db" Foreground="White" BorderThickness="0" Cursor="Hand">
								<Button.Template>
									<ControlTemplate TargetType="Button">
										<Border Background="{TemplateBinding Background}" CornerRadius="3">
											<ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
										</Border>
									</ControlTemplate>
								</Button.Template>
							</Button>
						</Grid>
						<TextBlock Text="Fichier Jar (ex: server.jar)" Foreground="White" Margin="0,0,0,5"/>
						<Grid Margin="0,0,0,20">
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="*"/>
								<ColumnDefinition Width="Auto"/>
							</Grid.ColumnDefinitions>
							<TextBox Text="{Binding JarName, UpdateSourceTrigger=PropertyChanged}" Padding="5" Background="#34495e" Foreground="White" BorderThickness="0"/>
							<Button Grid.Column="1" Content="..." Command="{Binding SelectJarCommand}" Width="35" Margin="5,0,0,0" Background="#3498db" Foreground="White" BorderThickness="0" Cursor="Hand">
								<Button.Template>
									<ControlTemplate TargetType="Button">
										<Border Background="{TemplateBinding Background}" CornerRadius="3">
											<ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
										</Border>
									</ControlTemplate>
								</Button.Template>
							</Button>
						</Grid>
						<Grid Margin="0,0,0,5">
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="*"/>
								<ColumnDefinition Width="Auto"/>
							</Grid.ColumnDefinitions>
							<TextBlock Text="Arguments JVM" Foreground="White" VerticalAlignment="Center"/>
							<Button Grid.Column="1" Command="{Binding ApplyAikarFlagsCommand}" Content="⚡ Appliquer Optimisation Aikar" FontSize="10" FontWeight="Bold" Background="Transparent" Foreground="#f1c40f" BorderThickness="0" Cursor="Hand" ToolTip="Remplace les arguments actuels par la configuration Aikar (8GB RAM)">
								<Button.Template>
									<ControlTemplate TargetType="Button">
										<Border Background="Transparent">
											<ContentPresenter HorizontalAlignment="Right" VerticalAlignment="Center"/>
										</Border>
										<ControlTemplate.Triggers>
											<Trigger Property="IsMouseOver" Value="True">
												<Setter Property="Foreground" Value="#f39c12"/>
											</Trigger>
										</ControlTemplate.Triggers>
									</ControlTemplate>
								</Button.Template>
							</Button>
						</Grid>
						<TextBox Name="JvmArgs" Text="{Binding JvmArguments, UpdateSourceTrigger=PropertyChanged}" AcceptsReturn="True" TextWrapping="Wrap" Height="150" VerticalScrollBarVisibility="Auto" Padding="5" Background="#34495e" Foreground="White" BorderThickness="0"/>
						<TextBlock Text="ex: -Xmx4G -Xms2G" Foreground="#7f8c8d" FontSize="10" Margin="0,2,0,0"/>
						<TextBlock Text="Planificateur de Redémarrage" Foreground="#bdc3c7" FontSize="12" FontWeight="Bold" Margin="0,15,0,5"/>
						<Border Background="#34495e" CornerRadius="5" Padding="10">
							<Grid>
								<Grid.ColumnDefinitions>
									<ColumnDefinition Width="Auto"/>
									<ColumnDefinition Width="*"/>
									<ColumnDefinition Width="Auto"/>
								</Grid.ColumnDefinitions>
								<CheckBox IsChecked="{Binding AutoRestartEnabled}" Content="Redémarrage Auto" Foreground="White" VerticalAlignment="Center">
									<CheckBox.LayoutTransform>
										<ScaleTransform ScaleX="1.2" ScaleY="1.2"/>
									</CheckBox.LayoutTransform>
								</CheckBox>
								<StackPanel Grid.Column="2" Orientation="Horizontal" IsEnabled="{Binding AutoRestartEnabled}">
									<TextBlock Text="à" Foreground="#bdc3c7" VerticalAlignment="Center" Margin="10,0"/>
									<TextBox Text="{Binding AutoRestartTime, UpdateSourceTrigger=PropertyChanged}" Width="60" TextAlignment="Center" Background="#2c3e50" Foreground="White" BorderThickness="0" Padding="5"/>
									<TextBlock Text="(HH:mm)" Foreground="#7f8c8d" VerticalAlignment="Center" Margin="5,0,0,0" FontSize="10"/>
								</StackPanel>
							</Grid>
						</Border>
						<TextBlock Text="Notifications Discord (Webhook)" Foreground="#bdc3c7" FontSize="12" FontWeight="Bold" Margin="0,15,0,5"/>
						<Grid Margin="0,0,0,20">
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="*"/>
								<ColumnDefinition Width="Auto"/>
							</Grid.ColumnDefinitions>
							<TextBox Text="{Binding DiscordWebhookUrl, UpdateSourceTrigger=PropertyChanged}" Padding="5" Background="#34495e" Foreground="White" BorderThickness="0" ToolTip="Collez ici l'URL du Webhook Discord (Paramètres du salon > Intégrations > Webhooks)"/>
							<Button Visibility="Collapsed" Grid.Column="1" Content="TESTER" Command="{Binding TestWebhookCommand}" Margin="5,0,0,0" Padding="10,0" Background="#5865F2" Foreground="White" FontWeight="Bold" BorderThickness="0" Cursor="Hand">
								<Button.Template>
									<ControlTemplate TargetType="Button">
										<Border Background="{TemplateBinding Background}" CornerRadius="3">
											<ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
										</Border>
									</ControlTemplate>
								</Button.Template>
							</Button>
						</Grid>
					</StackPanel>
				</ScrollViewer>
			</Border>
		</Grid>
		<Border Grid.Row="2" Padding="20" Background="#2c3e50">
			<Button Content="ENREGISTRER LA CONFIGURATION" Command="{Binding SaveCommand}" Height="45" Background="#27ae60" Foreground="White" FontWeight="Bold" BorderThickness="0" Cursor="Hand" Width="300" HorizontalAlignment="Center">
            </Button>
		</Border>
	</Grid>
</UserControl>
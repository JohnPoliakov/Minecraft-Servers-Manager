<UserControl x:Class="Minecraft_Server_Manager.UserControls.ServerEditor"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="800">

    <Grid Background="#2c3e50">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Padding="20" Background="#34495e">
            <StackPanel>
                <Grid Margin="0,0,0,15">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Column="0" Text="CONFIGURATION DU SERVEUR" Foreground="#bdc3c7" FontSize="12" FontWeight="Bold" VerticalAlignment="Center"/>
                    <Button Grid.Column="1" Content="SUPPRIMER" Command="{Binding DeleteCommand}" FontSize="10" FontWeight="Bold" Background="#e74c3c" Foreground="White" BorderThickness="0" Padding="10,5" Cursor="Hand" Width="70">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}" CornerRadius="5">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </Grid>

                <TextBlock Text="Nom d'affichage" Foreground="White" Margin="0,0,0,5"/>
                <TextBox Name="ServerName" Text="{Binding DisplayName, UpdateSourceTrigger=PropertyChanged}" Padding="5" FontSize="16" Background="#2c3e50" Foreground="White" BorderThickness="0"/>

                <TextBlock Text="Chemin du dossier" Foreground="#95a5a6" Margin="0,10,0,5"/>
                <TextBox Name="ServerPath" Text="{Binding FolderPath, Mode=OneWay}" IsReadOnly="True" Padding="5" Background="Transparent" Foreground="#7f8c8d" BorderThickness="0"/>
            </StackPanel>
        </Border>

        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="600"/>
            </Grid.ColumnDefinitions>

            <DataGrid Grid.Column="0" 
                      ItemsSource="{Binding ServerProperties}"
                      AutoGenerateColumns="False"
                      CanUserAddRows="True"
                      CanUserSortColumns="False" 
                      CanUserReorderColumns="False"
                      CanUserResizeColumns="False"
                      Background="Transparent"
                      RowBackground="#2c3e50"
                      AlternatingRowBackground="#34495e"
                      Foreground="White"
                      BorderThickness="0"
                      HeadersVisibility="Column"
                      GridLinesVisibility="Horizontal"
                      HorizontalGridLinesBrush="#7f8c8d">

                <DataGrid.ColumnHeaderStyle>
                    <Style TargetType="DataGridColumnHeader">
                        <Setter Property="Background" Value="#2c3e50"/>
                        <Setter Property="Foreground" Value="#95a5a6"/>
                        <Setter Property="FontSize" Value="14"/>
                        <Setter Property="FontWeight" Value="Bold"/>
                        <Setter Property="Padding" Value="10,10"/>
                        <Setter Property="Height" Value="40"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="DataGridColumnHeader">
                                    <Border Background="{TemplateBinding Background}" BorderBrush="#7f8c8d" BorderThickness="0,0,0,2">
                                        <ContentPresenter HorizontalAlignment="Left" VerticalAlignment="Center" Margin="{TemplateBinding Padding}"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </DataGrid.ColumnHeaderStyle>

                <DataGrid.Columns>
                    <DataGridTextColumn Header="Propriété" Binding="{Binding Key}" Width="200" IsReadOnly="True">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="Foreground" Value="#3498db"/>
                                <Setter Property="FontWeight" Value="SemiBold"/>
                                <Setter Property="Padding" Value="10,5"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>

                    <DataGridTextColumn Header="Valeur" Binding="{Binding Value}" Width="*">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="Padding" Value="10,5"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                </DataGrid.Columns>
            </DataGrid>

            <Border Grid.Column="1" Background="#2c3e50" BorderBrush="#7f8c8d" BorderThickness="1,0,0,0" Padding="15">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <TextBlock Text="PARAMÈTRES AVANCÉS" Foreground="#bdc3c7" FontSize="12" FontWeight="Bold" Margin="0,0,0,15"/>

                        <TextBlock Text="Miniature du serveur" Foreground="White" Margin="0,0,0,5"/>
                        <Border BorderBrush="#7f8c8d" BorderThickness="1" CornerRadius="5" Background="#34495e" Height="120" Width="120" Margin="0,0,0,5">
                            <Image Source="{Binding ServerIconSource}" Stretch="UniformToFill"/>
                        </Border>
                        <Button Content="Choisir une image..." Command="{Binding SelectImageCommand}"
                                Background="#3498db" Foreground="White" BorderThickness="0" Padding="10,5" Cursor="Hand" Width="150"  Margin="0,0,0,20">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}" CornerRadius="3">
                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>

                        <TextBlock Text="Chemin Java (JDK/JRE)" Foreground="White" Margin="0,0,0,5"/>
                        <TextBox Name="JdkPath" Text="{Binding JavaPath, UpdateSourceTrigger=PropertyChanged}" 
                                 Padding="5" Background="#34495e" Foreground="White" BorderThickness="0" Margin="0,0,0,20"/>

                        <TextBlock Text="Arguments JVM" Foreground="White" Margin="0,0,0,5"/>
                        <TextBox Name="JvmArgs" Text="{Binding JvmArguments, UpdateSourceTrigger=PropertyChanged}" 
                                 AcceptsReturn="True" TextWrapping="Wrap" Height="100" VerticalScrollBarVisibility="Auto"
                                 Padding="5" Background="#34495e" Foreground="White" BorderThickness="0"/>

                        <TextBlock Text="ex: -Xmx4G -Xms2G" Foreground="#7f8c8d" FontSize="10" Margin="0,2,0,0"/>

                    </StackPanel>
                </ScrollViewer>
            </Border>
        </Grid>

        <Border Grid.Row="2" Padding="20" Background="#2c3e50">
            <Button Content="ENREGISTRER LA CONFIGURATION" Command="{Binding SaveCommand}"
                    Height="45" Background="#27ae60" Foreground="White" FontWeight="Bold" BorderThickness="0" Cursor="Hand" Width="300" HorizontalAlignment="Center">
                <Button.Template>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="5">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Button.Template>
            </Button>
        </Border>

    </Grid>
</UserControl>